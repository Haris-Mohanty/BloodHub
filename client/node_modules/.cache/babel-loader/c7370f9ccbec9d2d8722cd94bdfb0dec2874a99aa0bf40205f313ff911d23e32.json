{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk}from\"@reduxjs/toolkit\";import API from\"../../../services/API\";import{toast}from\"react-toastify\";//****** LOGIN **********/\nexport var userLogin=createAsyncThunk(\"auth/login\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref,_ref2){var role,email,password,rejectWithValue,_yield$API$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:role=_ref.role,email=_ref.email,password=_ref.password;rejectWithValue=_ref2.rejectWithValue;_context.prev=2;_context.next=5;return API.post(\"/auth/login\",{role:role,email:email,password:password});case 5:_yield$API$post=_context.sent;data=_yield$API$post.data;//Store Token\nif(data.success){localStorage.setItem(\"token\",data.token);toast.success(data.message);window.location.replace(\"/\");}return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);if(!(_context.t0.response&&_context.t0.response.data.message)){_context.next=17;break;}return _context.abrupt(\"return\",rejectWithValue(_context.t0.response.data.message));case 17:return _context.abrupt(\"return\",rejectWithValue(_context.t0.message));case 18:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function(_x,_x2){return _ref3.apply(this,arguments);};}());//****** REGISTER **********/\nexport var userRegister=createAsyncThunk(\"auth/register\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref4,_ref5){var name,role,email,password,organisationName,hospitalName,website,address,phone,rejectWithValue,_yield$API$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:name=_ref4.name,role=_ref4.role,email=_ref4.email,password=_ref4.password,organisationName=_ref4.organisationName,hospitalName=_ref4.hospitalName,website=_ref4.website,address=_ref4.address,phone=_ref4.phone;rejectWithValue=_ref5.rejectWithValue;_context2.prev=2;_context2.next=5;return API.post(\"/auth/register\",{name:name,role:role,email:email,password:password,organisationName:organisationName,hospitalName:hospitalName,website:website,address:address,phone:phone});case 5:_yield$API$post2=_context2.sent;data=_yield$API$post2.data;if(data.success){toast.success(data.message);window.location.replace(\"/login\");}_context2.next=18;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);if(!(_context2.t0.response&&_context2.t0.response.data.message)){_context2.next=17;break;}return _context2.abrupt(\"return\",rejectWithValue(_context2.t0.response.data.message));case 17:return _context2.abrupt(\"return\",rejectWithValue(_context2.t0.message));case 18:case\"end\":return _context2.stop();}},_callee2,null,[[2,10]]);}));return function(_x3,_x4){return _ref6.apply(this,arguments);};}());//****** CURRENT USER ******/\nexport var getCurrentUser=createAsyncThunk(\"auth/getCurrentUser\",/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(rejectWithValue){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return API.get(\"/auth/current-user\");case 3:res=_context3.sent;if(!res.data){_context3.next=6;break;}return _context3.abrupt(\"return\",res===null||res===void 0?void 0:res.data);case 6:_context3.next=16;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);if(!(_context3.t0.response&&_context3.t0.response.data.message)){_context3.next=15;break;}return _context3.abrupt(\"return\",rejectWithValue(_context3.t0.response.data.message));case 15:return _context3.abrupt(\"return\",rejectWithValue(_context3.t0.message));case 16:case\"end\":return _context3.stop();}},_callee3,null,[[0,8]]);}));return function(_x5){return _ref7.apply(this,arguments);};}());","map":{"version":3,"names":["createAsyncThunk","API","toast","userLogin","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","_ref2","role","email","password","rejectWithValue","_yield$API$post","data","wrap","_callee$","_context","prev","next","post","sent","success","localStorage","setItem","token","message","window","location","replace","abrupt","t0","response","stop","_x","_x2","apply","arguments","userRegister","_ref6","_callee2","_ref4","_ref5","name","organisationName","hospitalName","website","address","phone","_yield$API$post2","_callee2$","_context2","console","log","_x3","_x4","getCurrentUser","_ref7","_callee3","res","_callee3$","_context3","get","_x5"],"sources":["C:/wamp64/www/BloodHub/client/src/redux/features/auth/authAction.js"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport API from \"../../../services/API\";\r\nimport { toast } from \"react-toastify\";\r\n\r\n//****** LOGIN **********/\r\nexport const userLogin = createAsyncThunk(\r\n  \"auth/login\",\r\n  async ({ role, email, password }, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await API.post(\"/auth/login\", { role, email, password });\r\n      //Store Token\r\n      if (data.success) {\r\n        localStorage.setItem(\"token\", data.token);\r\n        toast.success(data.message);\r\n        window.location.replace(\"/\");\r\n      }\r\n      return data;\r\n    } catch (error) {\r\n      if (error.response && error.response.data.message) {\r\n        return rejectWithValue(error.response.data.message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n//****** REGISTER **********/\r\nexport const userRegister = createAsyncThunk(\r\n  \"auth/register\",\r\n  async (\r\n    { name, role, email, password, organisationName, hospitalName, website, address, phone },\r\n    { rejectWithValue }\r\n  ) => {\r\n    try {\r\n      const { data } = await API.post(\"/auth/register\", { name, role, email, password, organisationName, hospitalName, website, address, phone });\r\n      if (data.success) {\r\n        toast.success(data.message);\r\n        window.location.replace(\"/login\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response && error.response.data.message) {\r\n        return rejectWithValue(error.response.data.message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n//****** CURRENT USER ******/\r\nexport const getCurrentUser = createAsyncThunk(\r\n  \"auth/getCurrentUser\",\r\n  async (rejectWithValue) => {\r\n    try {\r\n      const res = await API.get(\"/auth/current-user\");\r\n      if (res.data) {\r\n        return res?.data;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response && error.response.data.message) {\r\n        return rejectWithValue(error.response.data.message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
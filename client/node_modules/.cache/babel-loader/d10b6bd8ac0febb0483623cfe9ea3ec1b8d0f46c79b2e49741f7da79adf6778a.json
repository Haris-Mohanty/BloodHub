{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import{useDispatch}from\"react-redux\";import API from\"../../services/API\";import{getCurrentUser}from\"../../redux/features/auth/authAction\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProtectedRoutes=function ProtectedRoutes(_ref){var children=_ref.children;var dispatch=useDispatch();//Get User\nvar getUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.get(\"/auth/current-user\");case 3:_yield$API$get=_context.sent;data=_yield$API$get.data;if(data!==null&&data!==void 0&&data.success){dispatch(getCurrentUser(data));}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);localStorage.clear();console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getUser(){return _ref2.apply(this,arguments);};}();useEffect(function(){getUser();});if(localStorage.getItem(\"token\")){return children;}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}};export default ProtectedRoutes;","map":{"version":3,"names":["React","useEffect","useDispatch","API","getCurrentUser","Navigate","jsx","_jsx","ProtectedRoutes","_ref","children","dispatch","getUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$get","data","wrap","_callee$","_context","prev","next","get","sent","success","t0","localStorage","clear","console","log","stop","apply","arguments","getItem","to"],"sources":["C:/wamp64/www/BloodHub/client/src/components/Routes/ProtectedRoutes.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../services/API\";\r\nimport { getCurrentUser } from \"../../redux/features/auth/authAction\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nconst ProtectedRoutes = ({ children }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  //Get User\r\n  const getUser = async () => {\r\n    try {\r\n      const { data } = await API.get(\"/auth/current-user\");\r\n      if (data?.success) {\r\n        dispatch(getCurrentUser(data));\r\n      }\r\n    } catch (error) {\r\n      localStorage.clear();\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUser();\r\n  });\r\n\r\n  if (localStorage.getItem(\"token\")) {\r\n    return children;\r\n  } else {\r\n    return <Navigate to=\"/login\" />\r\n  }\r\n};\r\n\r\nexport default ProtectedRoutes;\r\n"],"mappings":"sPAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,OAASC,cAAc,KAAQ,sCAAsC,CACrE,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACjC,GAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B;AACA,GAAM,CAAAU,OAAO,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,cAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEW,CAAArB,GAAG,CAACsB,GAAG,CAAC,oBAAoB,CAAC,QAAAP,cAAA,CAAAI,QAAA,CAAAI,IAAA,CAA5CP,IAAI,CAAAD,cAAA,CAAJC,IAAI,CACZ,GAAIA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEQ,OAAO,CAAE,CACjBhB,QAAQ,CAACP,cAAc,CAACe,IAAI,CAAC,CAAC,CAChC,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,aAEDO,YAAY,CAACC,KAAK,CAAC,CAAC,CACpBC,OAAO,CAACC,GAAG,CAAAV,QAAA,CAAAM,EAAM,CAAC,CAAC,yBAAAN,QAAA,CAAAW,IAAA,MAAAhB,OAAA,gBAEtB,kBAVK,CAAAL,OAAOA,CAAA,SAAAC,KAAA,CAAAqB,KAAA,MAAAC,SAAA,OAUZ,CAEDlC,SAAS,CAAC,UAAM,CACdW,OAAO,CAAC,CAAC,CACX,CAAC,CAAC,CAEF,GAAIiB,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC,CAAE,CACjC,MAAO,CAAA1B,QAAQ,CACjB,CAAC,IAAM,CACL,mBAAOH,IAAA,CAACF,QAAQ,EAACgC,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CACF,CAAC,CAED,cAAe,CAAA7B,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import Spinner from\"../components/shared/Spinner\";import{toast}from\"react-toastify\";import Layout from\"../components/shared/Layout/Layout\";import Modal from\"../components/shared/modal/Modal\";import API from\"../services/API\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useSelector=useSelector(function(state){return state.auth;}),loading=_useSelector.loading,error=_useSelector.error,user=_useSelector.user;var navigate=useNavigate();// **Show records in page ***/\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//get \nvar getBloodrecords=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$get,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.get(\"/inventory/get-inventory\");case 3:_yield$API$get=_context.sent;_data=_yield$API$get.data;if(_data!==null&&_data!==void 0&&_data.success){setData(_data===null||_data===void 0?void 0:_data.inventory);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getBloodrecords(){return _ref.apply(this,arguments);};}();//call\nuseEffect(function(){getBloodrecords();},[]);return/*#__PURE__*/_jsxs(Layout,{children:[(user===null||user===void 0?void 0:user.role)===\"admin\"&&navigate(\"/admin\"),(user===null||user===void 0?void 0:user.role)===\"donor\"&&navigate(\"/organisation\"),(user===null||user===void 0?void 0:user.role)===\"hospital\"&&navigate(\"/organisation\"),error&&/*#__PURE__*/_jsx(\"span\",{children:toast.error(error)}),loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"main-page mt-5 mb-5 text-info fw-bold font-Audiowide\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#staticBackdrop\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus\"}),\"Add Inventory\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped font-Lato\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"red fw-bold font-sofias\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S/N\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"BloodGroup\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"InventoryType\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity(ml)\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date & Time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"category-list\",children:data===null||data===void 0?void 0:data.map(function(record,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:record.bloodGroup}),/*#__PURE__*/_jsx(\"td\",{children:record.inventoryType}),/*#__PURE__*/_jsxs(\"td\",{children:[record.quantity,\" (ml)\"]}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")})]},record._id);})})]}),/*#__PURE__*/_jsx(Modal,{})]})]});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useNavigate","Spinner","toast","Layout","Modal","API","moment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomePage","_useSelector","state","auth","loading","error","user","navigate","_useState","_useState2","_slicedToArray","data","setData","getBloodrecords","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$get","_data","wrap","_callee$","_context","prev","next","get","sent","success","inventory","t0","console","log","stop","apply","arguments","children","role","className","scope","map","record","index","bloodGroup","inventoryType","quantity","email","createdAt","format","_id"],"sources":["C:/wamp64/www/BloodHub/client/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Spinner from \"../components/shared/Spinner\";\r\nimport { toast } from \"react-toastify\";\r\nimport Layout from \"../components/shared/Layout/Layout\";\r\nimport Modal from \"../components/shared/modal/Modal\";\r\nimport API from \"../services/API\";\r\nimport moment from \"moment\";\r\n\r\nconst HomePage = () => {\r\n  const { loading, error, user } = useSelector((state) => state.auth);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // **Show records in page ***/\r\n  const [data, setData] = useState([]);\r\n  //get \r\n  const getBloodrecords = async () => {\r\n    try {\r\n      const { data } = await API.get(\"/inventory/get-inventory\");\r\n      if (data?.success) {\r\n        setData(data?.inventory);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  //call\r\n  useEffect(() => {\r\n    getBloodrecords();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      {user?.role === \"admin\" && navigate(\"/admin\")}\r\n\r\n      {user?.role === \"donor\" && navigate(\"/organisation\")}\r\n\r\n      {user?.role === \"hospital\" && navigate(\"/organisation\")}\r\n\r\n      {error && <span>{toast.error(error)}</span>}\r\n      {loading ? (\r\n        <Spinner />\r\n      ) : (\r\n        <>\r\n        \r\n          <h2\r\n            className=\"main-page mt-5 mb-5 text-info fw-bold font-Audiowide\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#staticBackdrop\"\r\n          >\r\n            <i className=\"fa-solid fa-plus\"></i>\r\n            Add Inventory\r\n          </h2>\r\n          <hr/>\r\n\r\n          \r\n            <table className=\"table table-striped font-Lato\">\r\n              <thead>\r\n                <tr className=\"red fw-bold font-sofias\">\r\n                  <th scope=\"col\">S/N</th>\r\n                  <th scope=\"col\">BloodGroup</th>\r\n                  <th scope=\"col\">InventoryType</th>\r\n                  <th scope=\"col\">Quantity(ml)</th>\r\n                  <th scope=\"col\">Email</th>\r\n                  <th scope=\"col\">Date & Time</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"category-list\">\r\n                {data?.map((record, index) => (\r\n                  <tr key={record._id}>\r\n                    <td>{index+1}</td>\r\n                    <td>{record.bloodGroup}</td>\r\n                    <td>{record.inventoryType}</td>\r\n                    <td>{record.quantity} (ml)</td>\r\n                    <td>{record.email}</td>\r\n                    <td>\r\n                      {moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          \r\n\r\n          <Modal />\r\n        </>\r\n      )}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"../../components/shared/Layout/Layout\";import API from\"../../services/API\";import moment from\"moment\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrganisationList=function OrganisationList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var getOrganisations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return API.get(\"/admin/organisation-list\");case 2:_yield$API$get=_context.sent;data=_yield$API$get.data;if(data!==null&&data!==void 0&&data.success){setData(data===null||data===void 0?void 0:data.organisationList);}case 5:case\"end\":return _context.stop();}},_callee);}));return function getOrganisations(){return _ref.apply(this,arguments);};}();useEffect(function(){getOrganisations();},[]);///******* DELETE DONOR RECORD ******/\nvar handleDelete=function handleDelete(id){try{var swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:\"btn btn-success mx-2\",cancelButton:\"btn btn-danger\"},buttonsStyling:false});swalWithBootstrapButtons.fire({title:\"Are you sure?\",text:\"You won't be able to revert this!\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Yes, delete it!\",cancelButtonText:\"No, cancel!\",reverseButtons:true}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(result){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!result.isConfirmed){_context2.next=7;break;}_context2.next=3;return API.delete(\"/admin/delete-organisation/\".concat(id));case 3:setTimeout(function(){window.location.reload();},1000);swalWithBootstrapButtons.fire(\"Deleted!\",\"Your file has been deleted.\",\"success\");_context2.next=8;break;case 7:if(/* Read more about handling dismissals below */result.dismiss===Swal.DismissReason.cancel){swalWithBootstrapButtons.fire(\"Cancelled\",\"Your imaginary file is safe :)\",\"error\");}case 8:case\"end\":return _context2.stop();}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());}catch(error){console.log(error);}};return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-4 fw-bold text-primary font-sofias\",children:\"Organisation - List\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped font-Lato\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"blue\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S/N\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"OrgName\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"OrgEmail\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"MobileNo. \"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Address \"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action \"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date & Time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"category-list\",children:data===null||data===void 0?void 0:data.map(function(record,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:record.organisationName}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:record.phone}),/*#__PURE__*/_jsx(\"td\",{children:record.address}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger py-2\",onClick:function onClick(){return handleDelete(record._id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\"}),\"Delete\"]})})]},record._id);})})]})]});};export default OrganisationList;","map":{"version":3,"names":["React","useState","useEffect","Layout","API","moment","Swal","jsx","_jsx","jsxs","_jsxs","OrganisationList","_useState","_useState2","_slicedToArray","data","setData","getOrganisations","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$get","wrap","_callee$","_context","prev","next","get","sent","success","organisationList","stop","apply","arguments","handleDelete","id","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","then","_ref2","_callee2","result","_callee2$","_context2","isConfirmed","delete","concat","setTimeout","window","location","reload","dismiss","DismissReason","cancel","_x","error","console","log","children","className","scope","map","record","index","organisationName","email","phone","address","createdAt","format","onClick","_id"],"sources":["C:/wamp64/www/BloodHub/client/src/pages/Admin/OrganisationList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../../components/shared/Layout/Layout\";\r\nimport API from \"../../services/API\";\r\nimport moment from \"moment\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst OrganisationList = () => {\r\n  const [data, setData] = useState([]);\r\n\r\n  const getOrganisations = async () => {\r\n    const { data } = await API.get(\"/admin/organisation-list\");\r\n\r\n    if (data?.success) {\r\n      setData(data?.organisationList);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getOrganisations();\r\n  }, []);\r\n\r\n  ///******* DELETE DONOR RECORD ******/\r\n  const handleDelete = (id) => {\r\n    try {\r\n      const swalWithBootstrapButtons = Swal.mixin({\r\n        customClass: {\r\n          confirmButton: \"btn btn-success mx-2\",\r\n          cancelButton: \"btn btn-danger\",\r\n        },\r\n        buttonsStyling: false,\r\n      });\r\n\r\n      swalWithBootstrapButtons\r\n        .fire({\r\n          title: \"Are you sure?\",\r\n          text: \"You won't be able to revert this!\",\r\n          icon: \"warning\",\r\n          showCancelButton: true,\r\n          confirmButtonText: \"Yes, delete it!\",\r\n          cancelButtonText: \"No, cancel!\",\r\n          reverseButtons: true,\r\n        })\r\n        .then(async (result) => {\r\n          if (result.isConfirmed) {\r\n            await API.delete(`/admin/delete-organisation/${id}`);\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 1000);\r\n            swalWithBootstrapButtons.fire(\r\n              \"Deleted!\",\r\n              \"Your file has been deleted.\",\r\n              \"success\"\r\n            );\r\n          } else if (\r\n            /* Read more about handling dismissals below */\r\n            result.dismiss === Swal.DismissReason.cancel\r\n          ) {\r\n            swalWithBootstrapButtons.fire(\r\n              \"Cancelled\",\r\n              \"Your imaginary file is safe :)\",\r\n              \"error\"\r\n            );\r\n          }\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <h2 className=\"mt-5 mb-4 fw-bold text-primary font-sofias\">\r\n        Organisation - List\r\n      </h2>\r\n      <hr />\r\n\r\n      <table className=\"table table-striped font-Lato\">\r\n        <thead>\r\n          <tr className=\"blue\">\r\n            <th scope=\"col\">S/N</th>\r\n            <th scope=\"col\">OrgName</th>\r\n            <th scope=\"col\">OrgEmail</th>\r\n            <th scope=\"col\">MobileNo. </th>\r\n            <th scope=\"col\">Address </th>\r\n            <th scope=\"col\">Action </th>\r\n            <th scope=\"col\">Date & Time</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"category-list\">\r\n          {data?.map((record, index) => (\r\n            <tr key={record._id}>\r\n              <td>{index + 1}</td>\r\n              <td>{record.organisationName}</td>\r\n              <td>{record.email}</td>\r\n              <td>{record.phone}</td>\r\n              <td>{record.address}</td>\r\n              <td>{moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}</td>\r\n              <td>\r\n                <button\r\n                  className=\"btn btn-danger py-2\"\r\n                  onClick={() => handleDelete(record._id)}\r\n                >\r\n                  <i className=\"fa-solid fa-trash\"></i>Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default OrganisationList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/wamp64/www/BloodHub/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"./../../components/shared/Layout/Layout\";import API from\"../../services/API\";import{useSelector}from\"react-redux\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrganisationPage=function OrganisationPage(){//Get Current User\nvar _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//find org data\nvar getOrganisations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API,_data,_yield$API2,_data2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!((user===null||user===void 0?void 0:user.role)===\"donor\")){_context.next=7;break;}_context.next=4;return API(\"/inventory/get-organisation\");case 4:_yield$API=_context.sent;_data=_yield$API.data;if(_data!==null&&_data!==void 0&&_data.success){setData(_data===null||_data===void 0?void 0:_data.organisations);}case 7:if(!((user===null||user===void 0?void 0:user.role)===\"hospital\")){_context.next=13;break;}_context.next=10;return API(\"/inventory/get-organisation-for-hospital\");case 10:_yield$API2=_context.sent;_data2=_yield$API2.data;if(_data2!==null&&_data2!==void 0&&_data2.success){setData(_data2===null||_data2===void 0?void 0:_data2.organisations);}case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function getOrganisations(){return _ref.apply(this,arguments);};}();useEffect(function(){getOrganisations();},[user]);return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-4 fw-bold text-primary font-sofias\",children:\"Organisation Details\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped font-Lato\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"blue\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S/N\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"OrgName\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"OrgEmail\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"MobileNo. \"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Address \"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date & Time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"category-list\",children:data===null||data===void 0?void 0:data.map(function(record,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:record.organisationName}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:record.phone}),/*#__PURE__*/_jsx(\"td\",{children:record.address}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")})]},record._id);})})]})]});};export default OrganisationPage;","map":{"version":3,"names":["React","useState","useEffect","Layout","API","useSelector","moment","jsx","_jsx","jsxs","_jsxs","OrganisationPage","_useSelector","state","auth","user","_useState","_useState2","_slicedToArray","data","setData","getOrganisations","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API","_data","_yield$API2","_data2","wrap","_callee$","_context","prev","next","role","sent","success","organisations","t0","console","log","stop","apply","arguments","children","className","scope","map","record","index","organisationName","email","phone","address","createdAt","format","_id"],"sources":["C:/wamp64/www/BloodHub/client/src/pages/dashboard/OrganisationPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./../../components/shared/Layout/Layout\";\r\nimport API from \"../../services/API\";\r\nimport { useSelector } from \"react-redux\";\r\nimport moment from \"moment\";\r\n\r\nconst OrganisationPage = () => {\r\n  //Get Current User\r\n  const { user } = useSelector((state) => state.auth);\r\n\r\n  const [data, setData] = useState([]);\r\n\r\n  //find org data\r\n  const getOrganisations = async () => {\r\n    try {\r\n      //check donor\r\n      if (user?.role === \"donor\") {\r\n        const { data } = await API(\"/inventory/get-organisation\");\r\n        if (data?.success) {\r\n          setData(data?.organisations);\r\n        }\r\n      }\r\n      //check hospital\r\n      if (user?.role === \"hospital\") {\r\n        const { data } = await API(\"/inventory/get-organisation-for-hospital\");\r\n        if (data?.success) {\r\n          setData(data?.organisations);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getOrganisations();\r\n  }, [user]);\r\n\r\n  return (\r\n    <Layout>\r\n      <h2 className=\"mt-5 mb-4 fw-bold text-primary font-sofias\">Organisation Details</h2>\r\n      <hr />\r\n\r\n      <table className=\"table table-striped font-Lato\">\r\n        <thead>\r\n          <tr className=\"blue\">\r\n            <th scope=\"col\">S/N</th>\r\n            <th scope=\"col\">OrgName</th>\r\n            <th scope=\"col\">OrgEmail</th>\r\n            <th scope=\"col\">MobileNo. </th>\r\n            <th scope=\"col\">Address </th>\r\n            <th scope=\"col\">Date & Time</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"category-list\">\r\n          {data?.map((record, index) => (\r\n            <tr key={record._id}>\r\n              <td>{index + 1}</td>\r\n              <td>{record.organisationName}</td>\r\n              <td>{record.email}</td>\r\n              <td>{record.phone}</td>\r\n              <td>{record.address}</td>\r\n              <td>{moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default OrganisationPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}